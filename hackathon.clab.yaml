name: hackathon
prefix: ""
topology:
  defaults:
    kind: nokia_srlinux
  kinds:
    nokia_srlinux:
      image: ghcr.io/nokia/srlinux:25.10.1
      startup-config: config/__clabNodeName__.partial.txt
      type: ixr-d3l
    linux:
      image: ghcr.io/srl-labs/network-multitool
  nodes:
    spine1:
      type: ixr-h4-32d
    spine2:
      type: ixr-h4-32d
    leaf1:
    leaf2:
    client1:
      kind: linux
      exec:
        - ip link add link eth1 name eth1.100 type vlan id 100
        - ip link set dev eth1.100 up
        - ip addr add 192.168.100.1/24 dev eth1.100
        - ip link add link eth1 name eth1.200 type vlan id 200
        - ip link set dev eth1.200 up
        - ip addr add 192.168.201.2/24 dev eth1.200
        - ip route add 192.168.200.0/22 via 192.168.201.1
    client2:
      kind: linux
      exec:
        - ip link add link eth1 name eth1.100 type vlan id 100
        - ip link set dev eth1.100 up
        - ip addr add 192.168.100.2/24 dev eth1.100
        - ip link add link eth1 name eth1.200 type vlan id 200
        - ip link set dev eth1.200 up
        - ip addr add 192.168.202.2/24 dev eth1.200
        - ip route add 192.168.200.0/22 via 192.168.202.1
    client3:
      kind: linux
      exec:
        - ip link add link eth1 name eth1.100 type vlan id 100
        - ip link set dev eth1.100 up
        - ip addr add 192.168.100.3/24 dev eth1.100
        - ip link add link eth1 name eth1.200 type vlan id 200
        - ip link set dev eth1.200 up
        - ip addr add 192.168.203.2/24 dev eth1.200
        - ip route add 192.168.200.0/22 via 192.168.203.1

  links:
    - endpoints: ["spine1:ethernet-1/1", "leaf1:ethernet-1/31"]
    - endpoints: ["spine2:ethernet-1/1", "leaf1:ethernet-1/32"]
    - endpoints: ["spine1:ethernet-1/2", "leaf2:ethernet-1/31"]
    - endpoints: ["spine2:ethernet-1/2", "leaf2:ethernet-1/32"]
    - endpoints: ["leaf1:ethernet-1/30", "leaf2:ethernet-1/30"]
    - endpoints: ["leaf1:ethernet-1/1", "client1:eth1"]
    - endpoints: ["leaf2:ethernet-1/1", "client2:eth1"]
    - endpoints: ["leaf2:ethernet-1/2", "client3:eth1"]

